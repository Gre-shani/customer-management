{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gresh\\\\OneDrive\\\\Desktop\\\\Project\\\\customer-management\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// Main application component. Composes the CustomerTable and BulkUpload components.\nimport React, { useState, useEffect } from 'react';\nimport CustomerTable from './components/CustomerTable';\nimport BulkUpload from './components/BulkUpload';\nimport CustomerModal from './components/CustomerModal';\nimport api from './api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  // customers holds the list fetched from backend\n  const [customers, setCustomers] = useState([]);\n  // selected customer for modal\n  const [selected, setSelected] = useState(null);\n  // refresh toggle to refetch after bulk upload\n  const [refreshToggle, setRefreshToggle] = useState(false);\n\n  // fetch customers\n  useEffect(() => {\n    let cancelled = false;\n    async function fetchCustomers() {\n      try {\n        const res = await api.getAll();\n        if (cancelled) return;\n        // Normalize response: backend might return an array or a paged object\n        const data = res === null || res === void 0 ? void 0 : res.data;\n        let list = [];\n        if (Array.isArray(data)) list = data;else if (data && Array.isArray(data.content)) list = data.content;else if (data && Array.isArray(data.customers)) list = data.customers;else list = data || [];\n        setCustomers(list);\n      } catch (err) {\n        console.error('Failed to fetch customers', err);\n        setCustomers([]);\n      }\n    }\n    fetchCustomers();\n    return () => {\n      cancelled = true;\n    };\n  }, [refreshToggle]);\n\n  // called after successful upload to refresh list\n  function handleUploadSuccess() {\n    // toggle state to trigger useEffect refetch\n    setRefreshToggle(t => !t);\n    // also trigger an immediate fetch to refresh UI faster\n    api.getAll().then(res => {\n      const data = res === null || res === void 0 ? void 0 : res.data;\n      if (Array.isArray(data)) setCustomers(data);else if (data && Array.isArray(data.content)) setCustomers(data.content);else if (data && Array.isArray(data.customers)) setCustomers(data.customers);else setCustomers(data || []);\n    }).catch(() => {});\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Customer Management\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BulkUpload, {\n      onSuccess: handleUploadSuccess\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CustomerTable, {\n      customers: customers,\n      onRowClick: setSelected\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), selected && /*#__PURE__*/_jsxDEV(CustomerModal, {\n      customer: selected,\n      onClose: () => setSelected(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"zl8h912Z4JJ/Wes2fzbGZ3itIiE=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","CustomerTable","BulkUpload","CustomerModal","api","jsxDEV","_jsxDEV","App","_s","customers","setCustomers","selected","setSelected","refreshToggle","setRefreshToggle","cancelled","fetchCustomers","res","getAll","data","list","Array","isArray","content","err","console","error","handleUploadSuccess","t","then","catch","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSuccess","onRowClick","customer","onClose","_c","$RefreshReg$"],"sources":["C:/Users/gresh/OneDrive/Desktop/Project/customer-management/frontend/src/App.js"],"sourcesContent":["// Main application component. Composes the CustomerTable and BulkUpload components.\r\nimport React, { useState, useEffect } from 'react';\r\nimport CustomerTable from './components/CustomerTable';\r\nimport BulkUpload from './components/BulkUpload';\r\nimport CustomerModal from './components/CustomerModal';\r\nimport api from './api';\r\n\r\nexport default function App() {\r\n  // customers holds the list fetched from backend\r\n  const [customers, setCustomers] = useState([]);\r\n  // selected customer for modal\r\n  const [selected, setSelected] = useState(null);\r\n  // refresh toggle to refetch after bulk upload\r\n  const [refreshToggle, setRefreshToggle] = useState(false);\r\n\r\n  // fetch customers\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    async function fetchCustomers() {\r\n      try {\r\n        const res = await api.getAll();\r\n        if (cancelled) return;\r\n        // Normalize response: backend might return an array or a paged object\r\n        const data = res?.data;\r\n        let list = [];\r\n        if (Array.isArray(data)) list = data;\r\n        else if (data && Array.isArray(data.content)) list = data.content;\r\n        else if (data && Array.isArray(data.customers)) list = data.customers;\r\n        else list = data || [];\r\n        setCustomers(list);\r\n      } catch (err) {\r\n        console.error('Failed to fetch customers', err);\r\n        setCustomers([]);\r\n      }\r\n    }\r\n    fetchCustomers();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [refreshToggle]);\r\n\r\n  // called after successful upload to refresh list\r\n  function handleUploadSuccess() {\r\n    // toggle state to trigger useEffect refetch\r\n    setRefreshToggle(t => !t);\r\n    // also trigger an immediate fetch to refresh UI faster\r\n    api.getAll()\r\n      .then(res => {\r\n        const data = res?.data;\r\n        if (Array.isArray(data)) setCustomers(data);\r\n        else if (data && Array.isArray(data.content)) setCustomers(data.content);\r\n        else if (data && Array.isArray(data.customers)) setCustomers(data.customers);\r\n        else setCustomers(data || []);\r\n      })\r\n      .catch(() => {});\r\n  }\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <h1>Customer Management</h1>\r\n      <BulkUpload onSuccess={handleUploadSuccess} />\r\n      <CustomerTable customers={customers} onRowClick={setSelected} />\r\n      {selected && (\r\n        <CustomerModal customer={selected} onClose={() => setSelected(null)} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}