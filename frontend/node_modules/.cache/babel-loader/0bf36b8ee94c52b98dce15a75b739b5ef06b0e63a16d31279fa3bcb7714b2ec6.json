{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gresh\\\\OneDrive\\\\Desktop\\\\Project\\\\customer-management\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// Main application component. Composes the CustomerTable and BulkUpload components.\nimport React, { useState, useEffect } from 'react';\nimport CustomerTable from './components/CustomerTable';\nimport BulkUpload from './components/BulkUpload';\nimport CustomerModal from './components/CustomerModal';\nimport api from './api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  // customers holds the list fetched from backend\n  const [customers, setCustomers] = useState([]);\n  // selected customer for modal\n  const [selected, setSelected] = useState(null);\n  // refresh toggle to refetch after bulk upload\n  const [refreshToggle, setRefreshToggle] = useState(false);\n\n  // pagination & sorting state (server-driven)\n  const [page, setPage] = useState(0); // 0-based\n  const [size, setSize] = useState(10);\n  const [totalPages, setTotalPages] = useState(1);\n  const [totalElements, setTotalElements] = useState(0);\n  const [sort, setSort] = useState({\n    key: 'name',\n    dir: 'asc'\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // fetch customers\n  useEffect(() => {\n    let cancelled = false;\n    async function fetchCustomers() {\n      setLoading(true);\n      setError(null);\n      try {\n        // build sort param as 'field,dir'\n        const sortParam = sort !== null && sort !== void 0 && sort.key ? `${sort.key},${sort.dir}` : undefined;\n        const res = await api.getPage({\n          page,\n          size,\n          sort: sortParam\n        });\n        if (cancelled) return;\n        const data = res === null || res === void 0 ? void 0 : res.data;\n        // Spring Page<T> typically has: content, totalPages, totalElements, number\n        let list = [];\n        if (Array.isArray(data)) list = data;else if (data && Array.isArray(data.content)) list = data.content;else if (data && Array.isArray(data.customers)) list = data.customers;else list = data || [];\n        setCustomers(list);\n        setTotalPages(data && typeof data.totalPages === 'number' ? data.totalPages : Math.max(1, Math.ceil((data.totalElements || list.length) / size)));\n        setTotalElements(data && typeof data.totalElements === 'number' ? data.totalElements : list.length);\n      } catch (err) {\n        console.error('Failed to fetch customers', err);\n        setError('Failed to load customers');\n        setCustomers([]);\n        setTotalPages(1);\n        setTotalElements(0);\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n    fetchCustomers();\n    return () => {\n      cancelled = true;\n    };\n  }, [page, size, sort, refreshToggle]);\n\n  // called after successful upload to refresh list\n  function handleUploadSuccess() {\n    // keep current page/sort and trigger refresh\n    setRefreshToggle(t => !t);\n  }\n  function handlePageChange(newPage) {\n    // newPage expected 0-based\n    setPage(newPage);\n  }\n  function handleSortChange(key) {\n    setPage(0); // reset to first page when sorting changes\n    setSort(prev => ({\n      key,\n      dir: prev.key === key && prev.dir === 'asc' ? 'desc' : 'asc'\n    }));\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Customer Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"brand-sub\",\n          children: \"Manage your customers \\u2014 create, upload, and review\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn secondary\",\n          onClick: () => {\n            setPage(0);\n            setSize(10);\n            setSort({\n              key: 'name',\n              dir: 'asc'\n            });\n          },\n          children: \"Reset View\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: /*#__PURE__*/_jsxDEV(BulkUpload, {\n        onSuccess: handleUploadSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: /*#__PURE__*/_jsxDEV(CustomerTable, {\n        customers: customers,\n        page: page,\n        size: size,\n        totalPages: totalPages,\n        totalElements: totalElements,\n        onPageChange: handlePageChange,\n        onSortChange: handleSortChange,\n        sort: sort,\n        loading: loading,\n        error: error,\n        onRowClick: setSelected\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), selected && /*#__PURE__*/_jsxDEV(CustomerModal, {\n      customer: selected,\n      onClose: () => setSelected(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"z9vTCx7IsCyTi7XSSYtem+ujoc0=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","CustomerTable","BulkUpload","CustomerModal","api","jsxDEV","_jsxDEV","App","_s","customers","setCustomers","selected","setSelected","refreshToggle","setRefreshToggle","page","setPage","size","setSize","totalPages","setTotalPages","totalElements","setTotalElements","sort","setSort","key","dir","loading","setLoading","error","setError","cancelled","fetchCustomers","sortParam","undefined","res","getPage","data","list","Array","isArray","content","Math","max","ceil","length","err","console","handleUploadSuccess","t","handlePageChange","newPage","handleSortChange","prev","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSuccess","onPageChange","onSortChange","onRowClick","customer","onClose","_c","$RefreshReg$"],"sources":["C:/Users/gresh/OneDrive/Desktop/Project/customer-management/frontend/src/App.js"],"sourcesContent":["// Main application component. Composes the CustomerTable and BulkUpload components.\r\nimport React, { useState, useEffect } from 'react';\r\nimport CustomerTable from './components/CustomerTable';\r\nimport BulkUpload from './components/BulkUpload';\r\nimport CustomerModal from './components/CustomerModal';\r\nimport api from './api';\r\n\r\nexport default function App() {\r\n  // customers holds the list fetched from backend\r\n  const [customers, setCustomers] = useState([]);\r\n  // selected customer for modal\r\n  const [selected, setSelected] = useState(null);\r\n  // refresh toggle to refetch after bulk upload\r\n  const [refreshToggle, setRefreshToggle] = useState(false);\r\n\r\n  // pagination & sorting state (server-driven)\r\n  const [page, setPage] = useState(0); // 0-based\r\n  const [size, setSize] = useState(10);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [totalElements, setTotalElements] = useState(0);\r\n  const [sort, setSort] = useState({ key: 'name', dir: 'asc' });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // fetch customers\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    async function fetchCustomers() {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        // build sort param as 'field,dir'\r\n        const sortParam = sort?.key ? `${sort.key},${sort.dir}` : undefined;\r\n        const res = await api.getPage({ page, size, sort: sortParam });\r\n        if (cancelled) return;\r\n        const data = res?.data;\r\n        // Spring Page<T> typically has: content, totalPages, totalElements, number\r\n        let list = [];\r\n        if (Array.isArray(data)) list = data;\r\n        else if (data && Array.isArray(data.content)) list = data.content;\r\n        else if (data && Array.isArray(data.customers)) list = data.customers;\r\n        else list = data || [];\r\n\r\n        setCustomers(list);\r\n        setTotalPages((data && typeof data.totalPages === 'number') ? data.totalPages : Math.max(1, Math.ceil((data.totalElements || list.length) / size)));\r\n        setTotalElements((data && typeof data.totalElements === 'number') ? data.totalElements : list.length);\r\n      } catch (err) {\r\n        console.error('Failed to fetch customers', err);\r\n        setError('Failed to load customers');\r\n        setCustomers([]);\r\n        setTotalPages(1);\r\n        setTotalElements(0);\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    }\r\n    fetchCustomers();\r\n    return () => { cancelled = true; };\r\n  }, [page, size, sort, refreshToggle]);\r\n\r\n  // called after successful upload to refresh list\r\n  function handleUploadSuccess() {\r\n    // keep current page/sort and trigger refresh\r\n    setRefreshToggle(t => !t);\r\n  }\r\n\r\n  function handlePageChange(newPage) {\r\n    // newPage expected 0-based\r\n    setPage(newPage);\r\n  }\r\n\r\n  function handleSortChange(key) {\r\n    setPage(0); // reset to first page when sorting changes\r\n    setSort(prev => ({ key, dir: prev.key === key && prev.dir === 'asc' ? 'desc' : 'asc' }));\r\n  }\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <div className=\"app-header\">\r\n        <div>\r\n          <h1>Customer Management</h1>\r\n          <div className=\"brand-sub\">Manage your customers â€” create, upload, and review</div>\r\n        </div>\r\n        <div>\r\n          <button className=\"btn secondary\" onClick={() => { setPage(0); setSize(10); setSort({ key: 'name', dir: 'asc' }); }}>Reset View</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"card\">\r\n        <BulkUpload onSuccess={handleUploadSuccess} />\r\n      </div>\r\n\r\n      <div className=\"card\">\r\n        <CustomerTable\r\n          customers={customers}\r\n          page={page}\r\n          size={size}\r\n          totalPages={totalPages}\r\n          totalElements={totalElements}\r\n          onPageChange={handlePageChange}\r\n          onSortChange={handleSortChange}\r\n          sort={sort}\r\n          loading={loading}\r\n          error={error}\r\n          onRowClick={setSelected}\r\n        />\r\n      </div>\r\n\r\n      {selected && (\r\n        <CustomerModal customer={selected} onClose={() => setSelected(null)} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}